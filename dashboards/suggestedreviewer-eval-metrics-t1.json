{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": "-- Grafana --",
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "target": {
          "limit": 100,
          "matchAny": false,
          "tags": [

          ],
          "type": "dashboard"
        },
        "type": "dashboard"
      }
    ]
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": null,
  "links": [

  ],
  "liveNow": false,
  "panels": [
    {
      "description": "This describes the percentage of times where at least one suggested reviewer is in the candidate list.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [

          ],
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "orange",
                "value": 70
              },
              {
                "color": "red",
                "value": 85
              }
            ]
          },
          "unit": "percent"
        },
        "overrides": [

        ]
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 0,
        "y": 0
      },
      "id": 2,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": true
        },
        "textMode": "auto"
      },
      "pluginVersion": "8.4.4",
      "targets": [
        {
          "builderOptions": {
            "database": "validation_model_metrics",
            "fields": [

            ],
            "limit": 100,
            "metrics": [
              {
                "aggregation": "avg",
                "alias": "AS",
                "field": "in_top_n"
              }
            ],
            "mode": "aggregate",
            "table": "aggregate_metrics"
          },
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "meta": {
            "builderOptions": {
              "database": "validation_model_metrics",
              "fields": [

              ],
              "limit": 100,
              "metrics": [
                {
                  "aggregation": "avg",
                  "alias": "AS",
                  "field": "in_top_n"
                }
              ],
              "mode": "aggregate",
              "table": "aggregate_metrics"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT avg(in_top_k) * 100 AS accuracy_global FROM validation_model_metrics.aggregate_metrics_mv",
          "refId": "A"
        }
      ],
      "title": "in_top_k Accuracy",
      "transparent": true,
      "type": "stat"
    },
    {
      "description": "This displays the count of MRs per all approved projects (internal projects).",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisGridShow": false,
            "axisLabel": "",
            "axisPlacement": "auto",
            "axisSoftMin": 0,
            "fillOpacity": 80,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineWidth": 1,
            "scaleDistribution": {
              "type": "linear"
            }
          },
          "mappings": [

          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "short"
        },
        "overrides": [
          {
            "__systemRef": "hideSeriesFrom",
            "matcher": {
              "id": "byNames",
              "options": {
                "mode": "exclude",
                "names": [
                  "merge_requests_count"
                ],
                "prefix": "All except:",
                "readOnly": true
              }
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 4,
        "y": 0
      },
      "id": 12,
      "options": {
        "barRadius": 0,
        "barWidth": 0.97,
        "groupWidth": 0.7,
        "legend": {
          "calcs": [

          ],
          "displayMode": "hidden",
          "placement": "right"
        },
        "orientation": "horizontal",
        "showValue": "always",
        "stacking": "none",
        "tooltip": {
          "mode": "single",
          "sort": "none"
        },
        "xTickLabelRotation": 0,
        "xTickLabelSpacing": 0
      },
      "targets": [
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT \n    project_name,\n    merge_requests_count\nFROM\n(\nSELECT\n    project_id,\n    count(*) AS merge_requests_count\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id\n)  AS per_project_metrics\nJOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 20\nORDER BY merge_requests_count DESC\n",
          "refId": "A"
        }
      ],
      "title": "Number of MRs per Approved Projects",
      "type": "barchart"
    },
    {
      "description": "The ratio is calculated by aggregating all MRs by length of candidates first and then aggregating by the number of accepted reviewers amongst that candidate list. This number of MRs is divided by the total number of MRs and then multiplied by 100 to get a percentage of total MRs. For example, in the first row, the ratio indicates the number of MRs with one accepted reviewer with five total candidates amongst all MRs.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "center",
            "displayMode": "auto"
          },
          "mappings": [

          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "none"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Candidates"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 122
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Accepted Reviewers"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 186
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Acceptance Ratio"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 16,
        "y": 0
      },
      "id": 16,
      "options": {
        "footer": {
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": [

        ]
      },
      "pluginVersion": "8.4.4",
      "targets": [
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": true,
          "format": 1,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n  LENGTH(candidates) AS \"Candidates\",\n  LENGTH(arrayIntersect(reviewers,candidates)) AS \"Accepted Reviewers\",\n  COUNT(*) / (SELECT COUNT(*) FROM validation_model_metrics.aggregate_metrics) * 100 AS \"Acceptance Ratio\"\nFROM validation_model_metrics.aggregate_metrics\nWHERE LENGTH(candidates) >= 5 and LENGTH(candidates) <= 7 and LENGTH(arrayIntersect(reviewers, candidates)) > 0 and LENGTH(arrayIntersect(reviewers, candidates)) <= 7\nGROUP BY LENGTH(candidates), LENGTH(arrayIntersect(reviewers, candidates))\nORDER BY LENGTH(candidates), LENGTH(arrayIntersect(reviewers, candidates))",
          "refId": "A",
          "selectedFormat": 1
        }
      ],
      "title": "Ratio of Accepted Reviewers Given N Candidates",
      "transformations": [

      ],
      "type": "table"
    },
    {
      "description": "This metric describes the percent of times the selected reviewers is not in the suggested candidates.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [

          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": [

        ]
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 0,
        "y": 4
      },
      "id": 6,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": true
        },
        "textMode": "auto"
      },
      "pluginVersion": "8.4.4",
      "targets": [
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT 1 - AVG(in_top_k) AS misclassification_global \nFROM validation_model_metrics.aggregate_metrics",
          "refId": "A"
        }
      ],
      "title": "in_top_k Misclassification",
      "type": "stat"
    },
    {
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisLabel": "Number of MRs",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineStyle": {
              "fill": "solid"
            },
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [

          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": [

        ]
      },
      "gridPos": {
        "h": 9,
        "w": 24,
        "x": 0,
        "y": 8
      },
      "id": 17,
      "options": {
        "legend": {
          "calcs": [

          ],
          "displayMode": "table",
          "placement": "right"
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": true,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    merge_requests_count as \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-com/www-gitlab-com'\nORDER BY recommendation_month",
          "refId": "gitlab-com/www-gitlab-com"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": true,
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    merge_requests_count as \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-org/customers-gitlab-com'\nORDER BY recommendation_month",
          "refId": "gitlab-org/customers-gitlab-com"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    merge_requests_count as \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-org/gitlab'\nORDER BY recommendation_month",
          "refId": "gitlab-org/gitlab"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    merge_requests_count as \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-com/marketing/digital-experience/buyer-experience'\nORDER BY recommendation_month",
          "refId": "gitlab-com/marketing/digital-experience/buyer-experience"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    merge_requests_count as \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'levenlabs/frontend/app-web'\nORDER BY recommendation_month",
          "refId": "levenlabs/frontend/app-web"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    merge_requests_count as \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-org/customers-gitlab-com'\nORDER BY recommendation_month",
          "refId": "gitlab-org/gitlab-qa"
        }
      ],
      "title": "Number of MRs per Internal Project Monthly",
      "transformations": [

      ],
      "type": "timeseries"
    },
    {
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisLabel": "Number of MRs",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineStyle": {
              "fill": "solid"
            },
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [

          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": [

        ]
      },
      "gridPos": {
        "h": 9,
        "w": 24,
        "x": 0,
        "y": 17
      },
      "id": 8,
      "options": {
        "legend": {
          "calcs": [

          ],
          "displayMode": "table",
          "placement": "right"
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": true,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    runningDifference(merge_requests_count) AS \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-com/www-gitlab-com'\nORDER BY recommendation_month",
          "refId": "gitlab-com/www-gitlab-com"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": true,
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    runningDifference(merge_requests_count) AS \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-org/customers-gitlab-com'\nORDER BY recommendation_month",
          "refId": "gitlab-org/customers-gitlab-com"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": true,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    runningDifference(merge_requests_count) AS \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-org/gitlab'\nORDER BY recommendation_month",
          "refId": "gitlab-org/gitlab"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": true,
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    runningDifference(merge_requests_count) AS \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-com/marketing/digital-experience/buyer-experience'\nORDER BY recommendation_month",
          "refId": "gitlab-com/marketing/digital-experience/buyer-experience"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    runningDifference(merge_requests_count) AS \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'levenlabs/frontend/app-web'\nORDER BY recommendation_month",
          "refId": "levenlabs/frontend/app-web"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    runningDifference(merge_requests_count) AS \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-org/customers-gitlab-com'\nORDER BY recommendation_month",
          "refId": "gitlab-org/gitlab-qa"
        }
      ],
      "title": "Change in Number of MRs per Internal Project Monthly",
      "type": "timeseries"
    },
    {
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisGridShow": true,
            "axisLabel": "in_top_k accuracy",
            "axisPlacement": "left",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineStyle": {
              "fill": "solid"
            },
            "lineWidth": 2,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [

          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": [

        ]
      },
      "gridPos": {
        "h": 9,
        "w": 24,
        "x": 0,
        "y": 26
      },
      "id": 4,
      "maxDataPoints": 1074,
      "options": {
        "legend": {
          "calcs": [

          ],
          "displayMode": "table",
          "placement": "right"
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "8.4.4",
      "targets": [
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": true,
          "format": 1,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    global_accuracy as \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS sample_size,\n    AVG(in_top_k) AS global_accuracy,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE sample_size > 10 and project_name = 'gitlab-com/www-gitlab-com'\nORDER BY recommendation_month\n",
          "refId": "gitlab-com/www-gitlab-com"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": true,
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    global_accuracy as \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS sample_size,\n    AVG(in_top_k) AS global_accuracy,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE sample_size > 10 and project_name = 'gitlab-org/customers-gitlab-com'\nORDER BY recommendation_month",
          "refId": "gitlab-org/customers-gitlab-com"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    global_accuracy as \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS sample_size,\n    AVG(in_top_k) AS global_accuracy,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE sample_size > 10 and project_name = 'gitlab-org/gitlab'\nORDER BY recommendation_month",
          "refId": "gitlab-org/gitlab"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    global_accuracy as \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS sample_size,\n    AVG(in_top_k) AS global_accuracy,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE sample_size > 10 and project_name = 'gitlab-com/marketing/digital-experience/buyer-experience'\nORDER BY recommendation_month",
          "refId": "gitlab-com/marketing/digital-experience/buyer-experience"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    global_accuracy as \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS sample_size,\n    AVG(in_top_k) AS global_accuracy,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE sample_size > 10 and project_name = 'levenlabs/frontend/app-web'\nORDER BY recommendation_month",
          "refId": "levenlabs/frontend/app-web"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    global_accuracy as \" \",\n    recommendation_month\nFROM (SELECT\n    project_id,\n    count(*) AS sample_size,\n    AVG(in_top_k) AS global_accuracy,\n    toStartOfMonth(latest_recommendation_time) as recommendation_month\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_month\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE sample_size > 10 and project_name = 'gitlab-org/gitlab-qa'\nORDER BY recommendation_month",
          "refId": "gitlab-org/gitlab-qa"
        }
      ],
      "title": "in_top_k Accuracy by Project Monthly",
      "transparent": true,
      "type": "timeseries"
    },
    {
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisLabel": "Number of MRs",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineStyle": {
              "fill": "solid"
            },
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [

          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": [

        ]
      },
      "gridPos": {
        "h": 9,
        "w": 24,
        "x": 0,
        "y": 35
      },
      "id": 10,
      "options": {
        "legend": {
          "calcs": [

          ],
          "displayMode": "table",
          "placement": "right"
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": true,
          "format": 1,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    merge_requests_count as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-com/www-gitlab-com'\nORDER BY recommendation_week",
          "refId": "gitlab-com/www-gitlab-com"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": true,
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    merge_requests_count as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-org/customers-gitlab-com'\nORDER BY recommendation_week",
          "refId": "gitlab-org/customers-gitlab-com"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    merge_requests_count as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-org/gitlab'\nORDER BY recommendation_week",
          "refId": "gitlab-org/gitlab"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    merge_requests_count as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-com/marketing/digital-experience/buyer-experience'\nORDER BY recommendation_week",
          "refId": "gitlab-com/marketing/digital-experience/buyer-experience"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    merge_requests_count as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'levenlabs/frontend/app-web'\nORDER BY recommendation_week",
          "refId": "levenlabs/frontend/app-web"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    merge_requests_count as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-org/gitlab-qa'\nORDER BY recommendation_week",
          "refId": "gitlab-org/gitlab-qa"
        }
      ],
      "title": "Number of MRs per Internal Project Weekly",
      "type": "timeseries"
    },
    {
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisLabel": "Number of MRs",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineStyle": {
              "fill": "solid"
            },
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [

          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": [

        ]
      },
      "gridPos": {
        "h": 9,
        "w": 24,
        "x": 0,
        "y": 44
      },
      "id": 18,
      "options": {
        "legend": {
          "calcs": [

          ],
          "displayMode": "table",
          "placement": "right"
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": true,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    runningDifference(merge_requests_count) as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-com/www-gitlab-com'\nORDER BY recommendation_week",
          "refId": "gitlab-com/www-gitlab-com"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": true,
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    runningDifference(merge_requests_count) as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-org/customers-gitlab-com'\nORDER BY recommendation_week",
          "refId": "gitlab-org/customers-gitlab-com"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    runningDifference(merge_requests_count) as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-org/gitlab'\nORDER BY recommendation_week",
          "refId": "gitlab-org/gitlab"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    runningDifference(merge_requests_count) as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-com/marketing/digital-experience/buyer-experience'\nORDER BY recommendation_week",
          "refId": "gitlab-com/marketing/digital-experience/buyer-experience"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    runningDifference(merge_requests_count) as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'levenlabs/frontend/app-web'\nORDER BY recommendation_week",
          "refId": "levenlabs/frontend/app-web"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    runningDifference(merge_requests_count) as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS merge_requests_count,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE merge_requests_count > 10 and project_name = 'gitlab-org/gitlab-qa'\nORDER BY recommendation_week",
          "refId": "gitlab-org/gitlab-qa"
        }
      ],
      "title": "Change in Number of MRs per Internal Project Weekly",
      "type": "timeseries"
    },
    {
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisGridShow": true,
            "axisLabel": "in_top_k accuracy",
            "axisPlacement": "left",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineStyle": {
              "fill": "solid"
            },
            "lineWidth": 2,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [

          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": [

        ]
      },
      "gridPos": {
        "h": 9,
        "w": 24,
        "x": 0,
        "y": 53
      },
      "id": 9,
      "maxDataPoints": 1074,
      "options": {
        "legend": {
          "calcs": [

          ],
          "displayMode": "table",
          "placement": "right"
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "8.4.4",
      "targets": [
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": false,
          "format": 1,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    global_accuracy as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS sample_size,\n    AVG(in_top_k) AS global_accuracy,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE sample_size > 10 and project_name = 'gitlab-com/www-gitlab-com'\nORDER BY recommendation_week",
          "refId": "gitlab-com/www-gitlab-com"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "expand": true,
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    global_accuracy as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS sample_size,\n    AVG(in_top_k) AS global_accuracy,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE sample_size > 10 and project_name = 'gitlab-org/customers-gitlab-com'\nORDER BY recommendation_week",
          "refId": "gitlab-org/customers-gitlab-com"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    global_accuracy as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS sample_size,\n    AVG(in_top_k) AS global_accuracy,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE sample_size > 10 and project_name = 'gitlab-org/gitlab'\nORDER BY recommendation_week",
          "refId": "gitlab-org/gitlab"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    global_accuracy as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS sample_size,\n    AVG(in_top_k) AS global_accuracy,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE sample_size > 10 and project_name = 'gitlab-com/marketing/digital-experience/buyer-experience'\nORDER BY recommendation_week",
          "refId": "gitlab-com/marketing/digital-experience/buyer-experience"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    global_accuracy as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS sample_size,\n    AVG(in_top_k) AS global_accuracy,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE sample_size > 10 and project_name = 'levenlabs/frontend/app-web'\nORDER BY recommendation_week",
          "refId": "levenlabs/frontend/app-web"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "eFW_K_b4k"
          },
          "format": 1,
          "hide": false,
          "meta": {
            "builderOptions": {
              "fields": [

              ],
              "limit": 100,
              "mode": "list"
            }
          },
          "queryType": "sql",
          "rawSql": "SELECT\n    global_accuracy as \" \",\n    recommendation_week\nFROM (SELECT\n    project_id,\n    count(*) AS sample_size,\n    AVG(in_top_k) AS global_accuracy,\n    toStartOfWeek(latest_recommendation_time) as recommendation_week\nFROM\n    validation_model_metrics.aggregate_metrics\nGROUP BY project_id, recommendation_week\n)  AS per_project_metrics\nINNER JOIN validation_model_metrics.project_id_to_name as link \nON link.project_id = per_project_metrics.project_id\nWHERE sample_size > 10 and project_name = 'gitlab-org/gitlab-qa'\nORDER BY recommendation_week",
          "refId": "gitlab-org/gitlab-qa"
        }
      ],
      "title": "in_top_k Accuracy by Project Weekly",
      "transparent": true,
      "type": "timeseries"
    }
  ],
  "refresh": "",
  "schemaVersion": 35,
  "style": "dark",
  "tags": [

  ],
  "templating": {
    "list": [

    ]
  },
  "time": {
    "from": "2022-05-01T14:00:00.000Z",
    "to": "now"
  },
  "timepicker": {
  },
  "timezone": "",
  "title": "suggestedReviewer_eval_metrics_t1",
  "uid": "CPW0d9b4z",
  "version": 1,
  "weekStart": ""
}